<style>
    #intro {
        max-width: 40rem;
        margin: 1rem auto;
        text-align: center;
    }

    .intro__hed {
        font-size: 2em;
        margin: 2rem auto 0.5rem auto;
    }

    .intro__dek {
        color: #8a8a8a;
    }

    #intro {
        margin-bottom: 100px;
    }

    #outro {
        margin-top: 100px;
        text-align: left;
    }

    #scrolly {
        position: relative;
        background-color: #f3f3f3;
        padding: 1rem;
    }

    article {
        position: relative;
        padding: 0;
        max-width: 50rem;
        margin: 0 auto;
    }

    .sticky-thing {
        position: -webkit-sticky;
        position: sticky;
        left: 0;
        width: 100%;
        margin: 0;
        background-color: #8a8a8a;
        z-index: 0;
        top: 12.5vh;
        height: 75vh;
        /* Center everything inside */
        display: flex;
        align-items: center;
        justify-content: center;
        background-image: url('images/island.jpg');
        background-size: cover;
        background-position: center center;
    }

    .sticky-thing p {
        font-size: 8rem;
        font-weight: 900;
        color: #fff;
    }

    .step {
        margin: 0 auto 2rem auto;
        margin-bottom: 40rem;
        color: #fff;
        background-color: rgba(0, 154, 179, 0);
    }

    .step:last-child {
        margin-bottom: 0;
    }

    .step.is-active p {
        background-color: rgb(231 100 51 / 80%);
        color: #fff;
    }

    .step p {
        text-align: center;
        padding: 1rem;
        font-size: 1.5rem;
        background-color: rgba(0, 154, 179, 0.8);
    }
</style>

<main>
    <div id="intro" class="soc-heading">
        <h1 class="intro__hed">Furman Feature Example</h1>
        <p class="intro__dek">
            Start scrolling to see how it works.
        </p>
    </div>

    <section id="scrolly">
        <div class="sticky-thing">
            <p>step 0</p>
        </div>

        <article>
            <div class="step" data-step="1" data-image="island">
                <p>Here is an example of our first key takeaway.</p>
            </div>
            <div class="step" data-step="2" data-image="stream">
                <p>Here is another super interesting fact that is very special and unique.</p>
            </div>
            <div class="step" data-step="3" data-image="forest">
                <p>Wow! this article is so full of insights.</p>
            </div>
            <div class="step" data-step="4" data-image="mountain">
                <p>It's actually crazy how important and amazing our research is.</p>
            </div>
        </article>
    </section>

    <section id="outro">
        <p>
            Donna will write beautiful insightful narrative that goes in the following paragraphs. Our audiences are blown away with the elegant, clear prose. They leave feeling better informed about the issues and ready to advance the debate on housing and neighborhoods.
        </p>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut id tortor vel mi efficitur pellentesque. Etiam at molestie odio. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean rhoncus metus eu nulla venenatis ullamcorper. Phasellus vitae cursus nisl, id interdum dolor. Nullam a ex sit amet lorem iaculis hendrerit. Nulla sollicitudin finibus mauris tempor elementum. Etiam fringilla, eros tincidunt egestas laoreet, velit tortor malesuada massa, vel rhoncus arcu massa in quam. Aenean hendrerit massa non leo tristique ultrices.

        </p>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent eu mi erat. Nullam scelerisque neque venenatis augue egestas suscipit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent tellus nunc, elementum non ultricies a, varius a neque. Sed at egestas nunc. Vivamus nec erat vitae sem porttitor auctor vitae in lectus. Mauris suscipit elit a tempor dapibus. Curabitur porttitor vel leo et iaculis. Pellentesque dapibus eu sem vitae molestie. Integer at lectus quis dui pharetra lobortis. Morbi et nisi massa. Cras accumsan mollis mi vel mollis. Duis eu urna id nisi tincidunt ultricies ac sed lectus. Ut posuere finibus rutrum. Etiam metus neque, rutrum ut sem ac, egestas sollicitudin enim. Cras egestas metus nec elit sodales, ac fermentum orci volutpat.

        </p>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam porta pellentesque tellus, laoreet vulputate mi euismod vitae. Mauris sagittis tincidunt neque, ac ultrices urna lobortis sed. Proin euismod risus a tristique lacinia. Pellentesque efficitur, risus in elementum volutpat, urna risus volutpat lacus, a ullamcorper augue est id orci. Ut ornare dignissim condimentum. Nam in massa neque. Etiam volutpat condimentum urna, et porta turpis eleifend ut.

        </p>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse nec ullamcorper tortor. Nunc sagittis pulvinar molestie. Donec id tempus lacus. Aliquam mattis velit ac elit mattis, eget aliquam ante luctus. Nunc massa erat, efficitur id dolor id, egestas fermentum lacus. Fusce odio arcu, elementum in commodo at, volutpat et sem. Duis vulputate lacus a mauris gravida tristique. Proin ornare metus et massa tincidunt, a volutpat eros maximus. Suspendisse sit amet metus et risus sagittis pellentesque ac a lacus. In tempus nibh quis mi rutrum, vel pulvinar nibh ornare. Donec hendrerit arcu non quam ultricies, condimentum consectetur arcu dapibus. Ut placerat ex at nulla mollis, eu finibus sapien sagittis. Ut nec dictum mauris. Ut congue lorem nec finibus gravida.
        </p>
    </section>
    <div class="soc-content">
        <aside class="soc-aside">
            <ul class="soc-toc">
                <li>
                    <a href="#introduction">Introduction</a>
                </li>
                <li>
                    <a href="#findings">Findings</a>
                </li>
                <li>
                    <a href="#conclusion">Conclusion</a>
                </li>               
            </ul>
        </aside>
        <h2 id="introduction">The Rest of the Report begins here</h2>
        <p>
            This is where we will begin writing in a style that is rigorous, academic, and clear - describing the methods and detailed findings of our report.
        </p>
    </section>
</main>

<!-- <div class='debug'></div> -->
<script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
<script src="https://unpkg.com/scrollama"></script>
<script>
    // using d3 for convenience
    var main = document.querySelector("main");
    var scrolly = main.querySelector("#scrolly");
    var sticky = scrolly.querySelector(".sticky-thing");
    var article = scrolly.querySelector("article");
    var steps = article.querySelectorAll(".step");

    // initialize the scrollama
    var scroller = scrollama();

    // scrollama event handlers
    function handleStepEnter(response) {
        // response = { element, direction, index }
        var el = response.element;
        console.log(el);

        // remove is-active from all steps
        // then add is-active to this step
        steps.forEach(step => step.classList.remove('is-active'));
        el.classList.add('is-active');

        // update graphic based on step
        sticky.querySelector("p").innerText = `step ${el.dataset.step}`;
        // sticky.style.backgroundColor = el.dataset.color;
        //sticky.querySelector("p").style.fontSize = `${el.dataset.step}rem`;
        sticky.style.backgroundImage = `url(images/${el.dataset.image}.jpg)`;
        console.log(el.dataset.image)
    }

    function init() {
        // 2. setup the scroller passing options
        // 		this will also initialize trigger observations
        // 3. bind scrollama event handlers (this can be chained like below)
        scroller
            .setup({
                step: "#scrolly article .step",
                offset: 0.75,
                debug: false
            })
            .onStepEnter(handleStepEnter);

        // setup resize event
        window.addEventListener("resize", scroller.resize);
    }

    // kick things off
    init();
</script>